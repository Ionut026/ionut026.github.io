"use strict";(self.webpackChunkng_personal_movie_library=self.webpackChunkng_personal_movie_library||[]).push([[581],{6581:(Ue,U,c)=>{c.r(U),c.d(U,{MovieModule:()=>Ae});var p=c(9808),r=c(5620);const g=(0,r.ZF)("movies"),G=(0,r.P1)(g,o=>o.interationMode),Q=(0,r.P1)(g,o=>o.currentMovieId),H=(0,r.P1)(g,Q,(o,n)=>{var t;return 0===n?{id:0,name:"",directorName:"",posterImgUrl:"",rating:0,releaseDate:null,synopsis:"",watched:!1}:n?null===(t=o.movies)||void 0===t?void 0:t.find(i=>i.id===n):null}),L=(0,r.P1)(g,o=>o.movies),K=(0,r.P1)(g,o=>o.error),w=(0,r.PH)("[Movie API] Load Success",(0,r.Ky)()),S=(0,r.PH)("[Movie API] Load Fail",(0,r.Ky)()),F=(0,r.PH)("[Movie API] Create Movie Success",(0,r.Ky)()),q=(0,r.PH)("[Movie API] Create Movie Fail",(0,r.Ky)()),x=(0,r.PH)("[Movie API] Update Movie Success",(0,r.Ky)()),Z=(0,r.PH)("[Movie API] Update Movie Fail",(0,r.Ky)()),N=(0,r.PH)("[Movie API] Delete Movie Success",(0,r.Ky)()),D=(0,r.PH)("[Movie API] Delete Movie Fail",(0,r.Ky)()),k=(0,r.PH)("[Movie Page] Set Current Movie",(0,r.Ky)()),Y=(0,r.PH)("[Movie Page] Clear Current Movie"),V=(0,r.PH)("[Movie Page] Initialize Current Movie"),j=(0,r.PH)("[Movie Page] Load Movies"),J=(0,r.PH)("[Movie Page] Create Movie",(0,r.Ky)()),O=(0,r.PH)("[Movie Page] Update Movie",(0,r.Ky)()),E=(0,r.PH)("[Movie Page] Toggle Watched",(0,r.Ky)()),P=(0,r.PH)("[Movie Page] Delete Movie",(0,r.Ky)()),W=(0,r.PH)("[Movie Page] Change Interation Mode",(0,r.Ky)());var l=(()=>{return(o=l||(l={}))[o.View=0]="View",o[o.Insert=1]="Insert",o[o.Edit=2]="Edit",l;var o})();const z=(0,r.Lq)({currentMovieId:null,movies:[],error:"",interationMode:l.View},(0,r.on)(W,(o,n)=>Object.assign(Object.assign({},o),{interationMode:n.interactionMode,currentMovieId:n.interactionMode===l.Insert?0:0!==o.currentMovieId?o.currentMovieId:null})),(0,r.on)(k,(o,n)=>Object.assign(Object.assign({},o),{currentMovieId:n.currentMovieId,interationMode:l.View})),(0,r.on)(Y,o=>Object.assign(Object.assign({},o),{currentMovieId:null,interationMode:l.View})),(0,r.on)(V,o=>Object.assign(Object.assign({},o),{currentMovieId:0})),(0,r.on)(w,(o,n)=>Object.assign(Object.assign({},o),{movies:n.movies,error:"",interationMode:l.View})),(0,r.on)(S,(o,n)=>Object.assign(Object.assign({},o),{movies:[],error:n.error,interationMode:l.View})),(0,r.on)(F,(o,n)=>Object.assign(Object.assign({},o),{movies:[...o.movies,n.movie],currentMovieId:n.movie.id,error:"",interationMode:l.View})),(0,r.on)(q,(o,n)=>Object.assign(Object.assign({},o),{error:n.error})),(0,r.on)(x,(o,n)=>{const t=o.movies.map(i=>n.movie.id===i.id?n.movie:i);return Object.assign(Object.assign({},o),{movies:t,currentMovieId:n.movie.id,error:"",interationMode:l.View})}),(0,r.on)(Z,(o,n)=>Object.assign(Object.assign({},o),{error:n.error})),(0,r.on)(N,(o,n)=>Object.assign(Object.assign({},o),{movies:o.movies.filter(t=>t.id!==n.movieId),currentMovieId:null,error:"",interationMode:l.View})),(0,r.on)(D,(o,n)=>Object.assign(Object.assign({},o),{error:n.error})));var e=c(5e3);const X=function(o){return{active:o}};function B(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).movieSelected(a)}),e._uU(1),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,X,(null==t?null:t.id)===(null==i.selectedMovie?null:i.selectedMovie.id))),e.xp6(1),e.hij("",t.name," ")}}function ee(o,n){if(1&o&&(e.TgZ(0,"div",4)(1,"div",5),e.YNc(2,B,2,4,"button",6),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.movies)}}function te(o,n){if(1&o&&(e.TgZ(0,"div",8),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij(" Error: ",t.errorMessage,"\n")}}let oe=(()=>{class o{constructor(){this.pageTitle="Movies",this.errorMessage="",this.selectedMovie=null,this.movieWasSelected=new e.vpe}ngOnInit(){}movieSelected(t){this.movieWasSelected.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-movie-list"]],inputs:{errorMessage:"errorMessage",movies:"movies",selectedMovie:"selectedMovie"},outputs:{movieWasSelected:"movieWasSelected"},decls:5,vars:3,consts:[[1,"card","bg-dark","text-light"],[1,"card-header"],["class","card-body bg-secondary",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"card-body","bg-secondary"],[1,"list-group"],["class","list-group-item list-group-item-action rounded-0 text-light bg-dark",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","rounded-0","text-light","bg-dark",3,"ngClass","click"],[1,"alert","alert-danger"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.YNc(3,ee,3,1,"div",2),e.qZA(),e.YNc(4,te,2,1,"div",3)),2&t&&(e.xp6(2),e.hij(" ",i.pageTitle," "),e.xp6(1),e.Q6J("ngIf",i.movies),e.xp6(1),e.Q6J("ngIf",i.errorMessage))},directives:[p.O5,p.sg,p.mk],styles:["button.active[_ngcontent-%COMP%]{background-color:#404040!important;border:1px solid white}"]}),o})();function ie(o,n){if(1&o&&(e.TgZ(0,"div",12),e._UZ(1,"img",13),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.selectedMovie.posterImgUrl,e.LSH)}}function ne(o,n){if(1&o&&(e.TgZ(0,"tbody",14)(1,"tr")(2,"td"),e._uU(3,"Name: "),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA()(),e.TgZ(6,"tr")(7,"td"),e._uU(8,"Director: "),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA()(),e.TgZ(11,"tr")(12,"td"),e._uU(13,"Release Date: "),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.ALo(16,"date"),e.qZA()(),e.TgZ(17,"tr")(18,"td"),e._uU(19,"Rating: "),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA()(),e.TgZ(22,"tr")(23,"td"),e._uU(24,"Synopsis: "),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.qZA()(),e.TgZ(27,"tr")(28,"td"),e._uU(29,"Watched: "),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA()()()),2&o){const t=e.oxw();e.xp6(5),e.hij(" ",t.selectedMovie.name," "),e.xp6(5),e.hij(" ",t.selectedMovie.directorName," "),e.xp6(5),e.hij(" ",e.lcZ(16,6,t.selectedMovie.releaseDate)," "),e.xp6(6),e.hij(" ",t.selectedMovie.rating," "),e.xp6(5),e.hij(" ",t.selectedMovie.synopsis," "),e.xp6(5),e.hij("",!0===t.selectedMovie.watched?"Yes":"No"," ")}}function re(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1," No movie selected. Please select one movie from the list on the left side or add a new one. "),e.qZA())}function se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSetEditMode()}),e._uU(1," Edit "),e.qZA()}}function ae(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,"Mark as watched"),e.qZA())}function ce(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,"Mark as unwatched"),e.qZA())}function le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.onMarkMovieAsWatched(s.selectedMovie)}),e.YNc(1,ae,2,0,"span",5),e.YNc(2,ce,2,0,"span",5),e.qZA()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.selectedMovie.watched),e.xp6(1),e.Q6J("ngIf",t.selectedMovie.watched)}}function de(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return s.onDelete(s.selectedMovie)}),e._uU(1," Delete "),e.qZA()}}let ve=(()=>{class o{constructor(){this.pageTitle="Movie Details",this.delete=new e.vpe,this.changeInterationMode=new e.vpe,this.toggleWatched=new e.vpe}ngOnInit(){}onSetInsertMode(){this.changeInterationMode.emit(l.Insert)}onSetEditMode(){this.changeInterationMode.emit(l.Edit)}onMarkMovieAsWatched(t){this.toggleWatched.emit(t)}onDelete(t){this.delete.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-movie-details"]],inputs:{errorMessage:"errorMessage",selectedMovie:"selectedMovie",interactionMode:"interactionMode"},outputs:{delete:"delete",changeInterationMode:"changeInterationMode",toggleWatched:"toggleWatched"},decls:14,vars:7,consts:[[1,"card","bg-dark","text-light"],[1,"card-header"],[1,"card-body","bg-secondary"],["class","row justify-content-center ",4,"ngIf"],["class","table justify-content-center text-light",4,"ngIf"],[4,"ngIf"],[1,"card-footer","bg-dark","text-light"],[1,"d-flex","my-3"],[1,"btn","btn-primary","text-light","text-light","ms-0","me-2",3,"click"],["class","btn btn-primary text-light me-2",3,"click",4,"ngIf"],["class","btn btn-primary text-lightme-2",3,"click",4,"ngIf"],["class","btn btn-danger ms-auto me-0","type","button","style","width:80px",3,"click",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-auto",2,"max-height","300px",3,"src"],[1,"table","justify-content-center","text-light"],[1,"btn","btn-primary","text-light","me-2",3,"click"],[1,"btn","btn-primary","text-lightme-2",3,"click"],["type","button",1,"btn","btn-danger","ms-auto","me-0",2,"width","80px",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,ie,2,1,"div",3),e.YNc(5,ne,32,8,"tbody",4),e.YNc(6,re,2,0,"div",5),e.qZA(),e.TgZ(7,"div",6)(8,"div",7)(9,"button",8),e.NdJ("click",function(){return i.onSetInsertMode()}),e._uU(10," Add "),e.qZA(),e.YNc(11,se,2,0,"button",9),e.YNc(12,le,3,2,"button",10),e.YNc(13,de,2,0,"button",11),e.qZA()()()),2&t&&(e.xp6(2),e.hij(" ",i.pageTitle," "),e.xp6(2),e.Q6J("ngIf",i.selectedMovie),e.xp6(1),e.Q6J("ngIf",i.selectedMovie),e.xp6(1),e.Q6J("ngIf",!i.selectedMovie),e.xp6(5),e.Q6J("ngIf",i.selectedMovie),e.xp6(1),e.Q6J("ngIf",i.selectedMovie),e.xp6(1),e.Q6J("ngIf",i.selectedMovie))},directives:[p.O5],pipes:[p.uU],styles:[""]}),o})();var d=c(2382),C=c(1780);function pe(o,n){1&o&&(e.TgZ(0,"div",27),e._uU(1," This value is required. "),e.qZA())}function me(o,n){1&o&&(e.TgZ(0,"div",27),e._uU(1," This value is required. "),e.qZA())}function ue(o,n){1&o&&(e.TgZ(0,"div",27),e._uU(1," This value is required. "),e.qZA())}function ge(o,n){1&o&&(e.TgZ(0,"div",27),e._uU(1," This value is required and needs to be between 0 and 5. "),e.qZA())}function Me(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",28),e.NdJ("click",function(){e.CHM(t);const s=e.oxw(2);return s.onDelete(s.selectedMovie)}),e._uU(1," Delete "),e.qZA()}}const M=function(o){return{"is-invalid":o}};function _e(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",3),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"div",4)(2,"div",5)(3,"label",6),e._uU(4,"Movie Name"),e.qZA(),e._UZ(5,"input",7),e.YNc(6,pe,2,0,"div",8),e.qZA(),e.TgZ(7,"div",5)(8,"label",9),e._uU(9,"Director Name"),e.qZA(),e._UZ(10,"input",10),e.YNc(11,me,2,0,"div",8),e.qZA(),e.TgZ(12,"div",5)(13,"label",11),e._uU(14,"Release Date"),e.qZA(),e._UZ(15,"input",12),e.YNc(16,ue,2,0,"div",8),e.qZA(),e.TgZ(17,"div",5)(18,"label",13),e._uU(19,"Rating"),e.qZA(),e._UZ(20,"input",14),e.YNc(21,ge,2,0,"div",8),e.qZA(),e.TgZ(22,"div",5)(23,"label",15),e._uU(24,"Synopsis"),e.qZA(),e._UZ(25,"textarea",16),e.qZA(),e.TgZ(26,"div",5)(27,"label",17),e._uU(28,"Poster Image URL"),e.qZA(),e._UZ(29,"input",18),e.qZA(),e.TgZ(30,"div",19),e._UZ(31,"input",20),e.TgZ(32,"label",21),e._uU(33," Watched "),e.qZA()()(),e.TgZ(34,"div",22)(35,"div",23)(36,"button",24),e._uU(37," Save "),e.qZA(),e.TgZ(38,"button",25),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancel()}),e._uU(39," Cancel "),e.qZA(),e.YNc(40,Me,2,0,"button",26),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.editFormGroup),e.xp6(5),e.Q6J("ngClass",e.VKq(12,M,t.editFormGroup.controls.name.touched&&t.editFormGroup.controls.name.errors)),e.xp6(1),e.Q6J("ngIf",t.editFormGroup.controls.name.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(14,M,t.editFormGroup.controls.directorName.touched&&t.editFormGroup.controls.directorName.errors)),e.xp6(1),e.Q6J("ngIf",t.editFormGroup.controls.directorName.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(16,M,t.editFormGroup.controls.releaseDate.touched&&t.editFormGroup.controls.releaseDate.errors)),e.xp6(1),e.Q6J("ngIf",t.editFormGroup.controls.releaseDate.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(18,M,t.editFormGroup.controls.rating.touched&&t.editFormGroup.controls.rating.errors)),e.xp6(1),e.Q6J("ngIf",t.editFormGroup.controls.rating.errors),e.xp6(4),e.Q6J("ngClass",e.VKq(20,M,t.editFormGroup.controls.synopsis.touched&&t.editFormGroup.controls.synopsis.errors)),e.xp6(11),e.Q6J("disabled",!t.editFormGroup.valid||!t.editFormGroup.dirty),e.xp6(4),e.Q6J("ngIf",t.selectedMovie&&0!==t.selectedMovie.id)}}let he=(()=>{class o{constructor(t){this.formBuilder=t,this.pageTitle="Edit Movie",this.errorMessage="",this.selectedMovie=null,this.create=new e.vpe,this.update=new e.vpe,this.delete=new e.vpe,this.changeInterationMode=new e.vpe,this.editFormGroup=this.formBuilder.group({name:["",[d.kI.required]],directorName:["",[d.kI.required]],releaseDate:[new Date,[d.kI.required]],rating:[5],synopsis:[""],watched:[!1],posterImgUrl:[""]})}ngOnInit(){this.setupForm()}setupForm(){var t,i,s,a,b,T,I,A;this.editFormGroup.reset(),this.editFormGroup.patchValue({name:null===(t=this.selectedMovie)||void 0===t?void 0:t.name,directorName:null===(i=this.selectedMovie)||void 0===i?void 0:i.directorName,releaseDate:(null===(s=this.selectedMovie)||void 0===s?void 0:s.releaseDate)?new Date(null===(a=this.selectedMovie)||void 0===a?void 0:a.releaseDate):null,rating:null===(b=this.selectedMovie)||void 0===b?void 0:b.rating,synopsis:null===(T=this.selectedMovie)||void 0===T?void 0:T.synopsis,watched:null===(I=this.selectedMovie)||void 0===I?void 0:I.watched,posterImgUrl:null===(A=this.selectedMovie)||void 0===A?void 0:A.posterImgUrl})}onSubmit(){if(this.editFormGroup.dirty&&this.editFormGroup.valid){const t=Object.assign(Object.assign({},this.selectedMovie),this.editFormGroup.value);0==t.id?this.create.emit(t):this.update.emit(t)}}onCancel(){this.changeInterationMode.emit(l.View)}onDelete(t){this.delete.emit(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-movie-edit"]],inputs:{errorMessage:"errorMessage",selectedMovie:"selectedMovie"},outputs:{create:"create",update:"update",delete:"delete",changeInterationMode:"changeInterationMode"},decls:4,vars:2,consts:[[1,"card","bg-dark","text-light"],[1,"card-header"],["class","bg-dark text-light","validate","",3,"formGroup","ngSubmit",4,"ngIf"],["validate","",1,"bg-dark","text-light",3,"formGroup","ngSubmit"],[1,"card-body","bg-secondary"],[1,"form-group","mb-2","mb-2"],["for","name",1,"control-label"],["id","name","type","text","formControlName","name","title","Name","required","",1,"form-control","bg-dark","text-light","bg-dark","text-light",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","directorName",1,"control-label"],["id","directorName","type","text","formControlName","directorName","title","Director Name","required","",1,"form-control","bg-dark","text-light",3,"ngClass"],["for","releaseDate",1,"control-label"],["type","text","id","releaseDate","formControlName","releaseDate","title","Release Date","bsDatepicker","","required","",1,"form-control","bg-dark","text-light",3,"ngClass"],["for","rating",1,"control-label"],["id","rating","type","number","min","0","max","5","formControlName","rating","title","Rating","required","",1,"form-control","bg-dark","text-light",3,"ngClass"],["for","synopsis",1,"control-label"],["id","synopsis","rows","3","formControlName","synopsis","title","Synopsis",1,"form-control","bg-dark","text-light",3,"ngClass"],["for","posterImgUrl",1,"control-label"],["id","posterImgUrl","type","text","formControlName","posterImgUrl","title","Poster Image URL",1,"form-control","bg-dark","text-light"],[1,"form-check"],["type","checkbox","id","watched","title","Watched","formControlName","watched",1,"form-check-input","bg-dark","text-light"],["for","watched","id","watchedLabel'",1,"form-check-label"],[1,"card-footer","bg-dark","text-light"],[1,"d-flex","my-3"],["type","submit",1,"btn","btn-primary","text-light","text-light","ms-0","me-2",3,"disabled"],[1,"btn","btn-secondary","text-light","me-2",3,"click"],["class","btn btn-danger ms-auto me-0","type","button","style","width:80px",3,"click",4,"ngIf"],[1,"invalid-feedback"],["type","button",1,"btn","btn-danger","ms-auto","me-0",2,"width","80px",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2),e.qZA(),e.YNc(3,_e,41,22,"form",2),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",i.pageTitle," "),e.xp6(1),e.Q6J("ngIf",i.selectedMovie))},directives:[p.O5,d._Y,d.JL,d.sg,d.Fj,d.JJ,d.u,d.Q7,p.mk,C.Y5,C.Np,d.qQ,d.Fd,d.wV,d.Wl],styles:[""]}),o})();function fe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-movie-details",6),e.NdJ("delete",function(s){return e.CHM(t),e.oxw().deleteMovie(s)})("changeInterationMode",function(s){return e.CHM(t),e.oxw().changeInterationMode(s)})("toggleWatched",function(s){return e.CHM(t),e.oxw().toggleWatchedFlag(s)}),e.ALo(1,"async"),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("interactionMode",e.lcZ(1,3,t.interactionMode$))("selectedMovie",e.lcZ(2,5,t.selectedMovie$))("errorMessage",e.lcZ(3,7,t.errorMessage$))}}function be(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-movie-edit",7),e.NdJ("create",function(s){return e.CHM(t),e.oxw().createMovie(s)})("update",function(s){return e.CHM(t),e.oxw().updateMovie(s)})("delete",function(s){return e.CHM(t),e.oxw().deleteMovie(s)})("changeInterationMode",function(s){return e.CHM(t),e.oxw().changeInterationMode(s)}),e.ALo(1,"async"),e.ALo(2,"async"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("selectedMovie",e.lcZ(1,2,t.selectedMovie$))("errorMessage",e.lcZ(2,4,t.errorMessage$))}}let xe=(()=>{class o{constructor(t){this.store=t,this.MovieInterationModeType=l}ngOnInit(){this.movies$=this.store.select(L),this.errorMessage$=this.store.select(K),this.store.dispatch(j()),this.selectedMovie$=this.store.select(H),this.interactionMode$=this.store.select(G)}movieSelected(t){this.store.dispatch(k({currentMovieId:t.id}))}deleteMovie(t){this.store.dispatch(P({movieId:t.id}))}createMovie(t){this.store.dispatch(J({movie:t}))}updateMovie(t){this.store.dispatch(O({movie:t}))}toggleWatchedFlag(t){this.store.dispatch(E({movie:t}))}changeInterationMode(t){this.store.dispatch(W({interactionMode:t}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-movie-shell"]],decls:12,vars:17,consts:[[1,"row"],[1,"col-md-4","mb-2"],[3,"movies","selectedMovie","errorMessage","movieWasSelected"],[1,"col-md-8","mb-2"],[3,"interactionMode","selectedMovie","errorMessage","delete","changeInterationMode","toggleWatched",4,"ngIf"],[3,"selectedMovie","errorMessage","create","update","delete","changeInterationMode",4,"ngIf"],[3,"interactionMode","selectedMovie","errorMessage","delete","changeInterationMode","toggleWatched"],[3,"selectedMovie","errorMessage","create","update","delete","changeInterationMode"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"app-movie-list",2),e.NdJ("movieWasSelected",function(a){return i.movieSelected(a)}),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.qZA()(),e.TgZ(6,"div",3),e.YNc(7,fe,4,9,"app-movie-details",4),e.ALo(8,"async"),e.YNc(9,be,3,6,"app-movie-edit",5),e.ALo(10,"async"),e.ALo(11,"async"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("movies",e.lcZ(3,5,i.movies$))("selectedMovie",e.lcZ(4,7,i.selectedMovie$))("errorMessage",e.lcZ(5,9,i.errorMessage$)),e.xp6(5),e.Q6J("ngIf",e.lcZ(8,11,i.interactionMode$)===i.MovieInterationModeType.View),e.xp6(2),e.Q6J("ngIf",e.lcZ(10,13,i.interactionMode$)===i.MovieInterationModeType.Insert||e.lcZ(11,15,i.interactionMode$)===i.MovieInterationModeType.Edit))},directives:[oe,p.O5,ve,he],pipes:[p.Ov],styles:[""]}),o})();var Ze=c(3563),v=c(4394),$=c(5577),u=c(4004),m=c(262),_=c(9646),y=c(4351),h=c(520),Ce=c(2843),f=c(8505);let ye=(()=>{class o{constructor(t){this.http=t,this.moviesUrl="api/movies"}getMovies(){return this.http.get(this.moviesUrl).pipe((0,f.b)(t=>console.log(JSON.stringify(t))),(0,u.U)(t=>t.map(i=>this.mapMovieToMovieWithDateAttributes(i))),(0,m.K)(this.handleError))}createMovie(t){const i=new h.WM({"Content-Type":"application/json"}),s=Object.assign(Object.assign({},t),{id:null});return this.http.post(this.moviesUrl,s,{headers:i}).pipe((0,f.b)(a=>console.log("createMovie: "+JSON.stringify(a))),(0,u.U)(a=>this.mapMovieToMovieWithDateAttributes(a)),(0,m.K)(this.handleError))}updateMovie(t){const i=new h.WM({"Content-Type":"application/json"});return this.http.put(`${this.moviesUrl}/${t.id}`,t,{headers:i}).pipe((0,f.b)(()=>console.log("updateMovie: "+t.id)),(0,u.U)(()=>t),(0,m.K)(this.handleError))}deleteMovie(t){const i=new h.WM({"Content-Type":"application/json"});return this.http.delete(`${this.moviesUrl}/${t}`,{headers:i}).pipe((0,f.b)(a=>console.log("deleteMovie: "+t)),(0,m.K)(this.handleError))}handleError(t){let i;return i=t.error instanceof ErrorEvent?`An error occurred: ${t.error.message}`:`Backend returned code ${t.status}: ${t.body.error}`,console.error(t),(0,Ce._)(i)}mapMovieToMovieWithDateAttributes(t){return Object.assign(Object.assign({},t),{releaseDate:t.releaseDate?new Date(t.releaseDate):null})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),Te=(()=>{class o{constructor(t,i){this.actions$=t,this.movieService=i,this.loadMovies$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(j),(0,$.z)(()=>this.movieService.getMovies().pipe((0,u.U)(s=>w({movies:s})),(0,m.K)(s=>(0,_.of)(S({error:s}))))))),this.createMovie$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(J),(0,y.b)(s=>this.movieService.createMovie(s.movie).pipe((0,u.U)(a=>F({movie:a})),(0,m.K)(a=>(0,_.of)(q({error:a}))))))),this.updateMovie$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(O),(0,y.b)(s=>this.movieService.updateMovie(s.movie).pipe((0,u.U)(a=>x({movie:a})),(0,m.K)(a=>(0,_.of)(Z({error:a}))))))),this.toggleWatched$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(E),(0,y.b)(s=>this.movieService.updateMovie(Object.assign(Object.assign({},s.movie),{watched:!s.movie.watched})).pipe((0,u.U)(a=>x({movie:a})),(0,m.K)(a=>(0,_.of)(Z({error:a}))))))),this.deleteMovie$=(0,v.GW)(()=>this.actions$.pipe((0,v.l4)(P),(0,$.z)(s=>this.movieService.deleteMovie(s.movieId).pipe((0,u.U)(()=>N({movieId:s.movieId})),(0,m.K)(a=>(0,_.of)(D({error:a})))))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(v.eX),e.LFG(ye))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),o})();const Ie=[{path:"",component:xe}];let Ae=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,Ze.Bz.forChild(Ie),r.Aw.forFeature("movies",z),v.sQ.forFeature([Te]),d.UX,C.kn]]}),o})()}}]);